<!DOCTYPE html>
<html lang="en">
	<head>
		<title>
			Wii Themer
		</title>
		<meta charset="utf-8">
		<meta name="author" content="Naythan Morey">
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
		<link rel="stylesheet" href="index.css" type="text/css; charset=utf-8">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
		<link rel="icon" href="img/favicon.ico" type="image/ico" size="16x16">
		<script src="index.js" type="text/javascript"></script>
    
	<!--   -------- ?mymfile=batman.mym&version=513&spinselected=nospin-->
		<script>
			var wiimode = false;
			function getAllUrlParams(url) {
			// get query string from url (optional) or window
			var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

			// we'll store the parameters here
			var obj = {};

			// if query string exists
			if (queryString) {
				wiimode = true;
				// stuff after # is not part of query string, so get rid of it
				queryString = queryString.split('#')[0];

				// split our query string into its component parts
				var arr = queryString.split('&');

				for (var i = 0; i < arr.length; i++) {
				// separate the keys and the values
				var a = arr[i].split('=');

				// set parameter name and value (use 'true' if empty)
				var paramName = a[0];
				var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

				// (optional) keep case consistent
				paramName = paramName.toLowerCase();
				if (typeof paramValue === 'string') paramValue = paramValue.toLowerCase();

				// if the paramName ends with square brackets, e.g. colors[] or colors[2]
				if (paramName.match(/\[(\d+)?\]$/)) {

					// create key if it doesn't exist
					var key = paramName.replace(/\[(\d+)?\]/, '');
					if (!obj[key]) obj[key] = [];

					// if it's an indexed array e.g. colors[2]
					if (paramName.match(/\[\d+\]$/)) {
					// get the index value and add the entry at the appropriate position
					var index = /\[(\d+)\]/.exec(paramName)[1];
					obj[key][index] = paramValue;
					} else {
					// otherwise add the value to the end of the array
					obj[key].push(paramValue);
					}
				} 
				else {
					// we're dealing with a string
					if (!obj[paramName]) {
					// if it doesn't exist, create property
					obj[paramName] = paramValue;
					} else if (obj[paramName] && typeof obj[paramName] === 'string'){
					// if property does exist and it's a string, convert it to an array
					obj[paramName] = [obj[paramName]];
					obj[paramName].push(paramValue);
					} else {
					// otherwise add the property
					obj[paramName].push(paramValue);
					}
				}
				}
			}

			return obj;
			}
			themeInfo = getAllUrlParams(document.url);
			console.log("wiimode = " + wiimode);
			if(wiimode) {
				let len = themeInfo.mymfile.length;
				console.log("len = " + len);
				themeInfo.name = themeInfo.mymfile.substr(0,len-4);
				console.log(themeInfo.mymfile);
				console.log(themeInfo.version);
				console.log(themeInfo.name);
				console.log(themeInfo.spinselected);
			}
		</script>
	</head>
	<body id="body">
		<div id="pageheadercontainer">
			<div class="pageHeader smallcaps glow text-center border-white border-radius border-white-shadow background-black" id="pageHeader">
				<h1>Wii Themer</h1> 
				<div id="nav">
					<button title="Build a custom wii system menu theme" class="navinner text-white background-black border-white border-radius border-white-shadow " onclick="nav(4)" tabindex="4">Build A Theme</button>
					<button title="Links to helpful websites" class="navinner text-white background-black border-white border-radius border-white-shadow " onclick="nav(5)" tabindex="9">Helpful Links</button>
					<button title="Learn about wii themer" class="navinner text-white background-black border-white border-radius border-white-shadow " onclick="nav(2)" tabindex="2">About Wii Themer</button>
					<button title="Contact owner by email" class="navinner text-white background-black border-white border-radius border-white-shadow " onclick="nav(3)"tabindex="3">Contact Us</button>
				</div>
				<div id="wiimodemessage" class="hidden">Wii Mode Activated .</div>
			</div>
		</div>
		<div id="infocontainer" class="text-center border-radius border-text-shadow border-black color-black background-sand">
			<h1 class="text-blue smallcaps">Wii System Menu Theme Builder</h1><hr></hr><p>This site will help you build a Theme(.csm file) to install on the Nintendo Wii .</p><br></br><p class='text-center'><span class="text-red warninglight"><b><i><em>WARNING :</b></i></em></span> This file can <b><em>brick</em></b> your wii .<br><br>Proceed at your <b><em>Own</em></b> risk !!</p><br></br><br></br>
		</div>
		<div id="buildmodal" class="buildmodal hidden">	
			<div class="buildmodal-content">
				<div class="modal-header glow">
					<span title="Close Window" class="close">&times;</span>
					<h2 class="smallcaps">Build A Theme</h2>
				</div>
				<div class="modal-body">
				<div id="buildingcontainer" class=" text-white background-black border-white border-radius border-white-shadow">
				<div id="previewcontainer" class="">
					<img class="preview" id="preview1" src="" alt="preview picture 1"></img>
					<div id="themevideocontainer" class="border-radius hidden" >
						<iframe id="videoframe" class="border-radius" src="" title="" frameborder="0" allowfullscreen></iframe>
					</div>
					<div title="Previous Theme" id="larrow" class="text-center border-white border-radius border-white-shadow clearfix" onclick="previewcontrol(-1)">&lt;&lt;</div>
					<div title="Next Theme" id="rarrow" class="text-center border-white border-radius border-white-shadow clearfix" onclick="previewcontrol(1)">&gt;&gt;</div>
					<div title="Check out a video of the theme" id="checkpreview" class="text-center border-white border-radius border-white-shadow" onclick="loadvideo()">Theme Video Preview</div>
					
				</div>
				<div id="building" class="">	
					<label for="theme" id="themelabel"class="border-white border-radius border-white-shadow buildlabel ">Select Theme :</label>
					<select title="Select a Theme" class="buildselect " name="theme" id="theme" onchange="getselected(3)" tabindex="3">	</select>
					<br></br>
					<label for="menuversion" id="menuversionlabel" class="border-white border-radius border-white-shadow buildlabel ">Select System Menu Version :</label>
					<select title="Select a Menu Version" class="buildselect " name="menuversion" id="menuversion" onchange="getselected(1)" tabindex="1" ></select>
					<br></br>
					<label for="region" id="regionlabel" class="border-white border-radius border-white-shadow buildlabel ">Select System Region :</label>
					<select title="Select a Region" class="buildselect " name="region" id="region" onchange="getselected(2)" tabindex="2"></select>
					<br></br>
					
					<button title="Build and Download Theme" id="continue" class="text-white background-black border-white border-radius border-white-shadow glow" onclick="buildThemestart()" tabindex="6">Build Theme</button>
				</div>
				<div id="spinoption" class="flex-column">
					<label for="option" id="optionlabel" class="border-white border-radius border-white-shadow buildlabel"><b><i>Optional</i></b> - Select an Option :</label>
					<input type="radio" name="option" id="option" value="fastspin">Fast Spin Channels</input>
					<input type="radio" name="option" id="option" value="spin">Spin Channels</input>
					<input type="radio" name="option" id="option" value="nospin" checked>No Spin Channels</input>
					<div title="Your Selection Info." id="message" class="border-white border-radius border-white-shadow background-black text-white"></div>
				</div>
			</div>
				</div>
			</div>
		</div>
		<div id="linksmodal" class="linksmodal hidden">	
			<div class="linksmodal-content">
				<div class="modal-header glow">
					<span title="Close Window" class="close">&times;</span>
					<h2 class="smallcaps">Helpful Links</h2>
				</div>
				<div class="modal-body">
					<div class="links"><a target="blank" href='https://gbatemp.net'>GBAtemp</a>The best gaming community . <a target="blank" href='https://gbatemp.net/threads/wii-theme-team-creations.260327/'> Wii Theme Team</a>The team that made all the Dark Wii Colored themes . </div>
					<div class="links"><a target="blank" href="https://wiibrew.org/wiki/System_Menu">Wii Brew</a>A great place to learn about the Wii's tech .</div>
					<div class="links"><a target="blank" href="https://www.youtube.com/user/McDiddy81/videos">Diddy81 Youtube Channel</a>One of the main members of the Wii Theme Team .</div>
					<div class="links"><a target="blank" href="https://gbatemp.net/threads/wii-themes.174895/">Frylok's Themes</a>More themes .</div>
					<div class="links"><a target="blank" href="https://gbatemp.net/threads/best-way-to-mod-any-wii-modmii-for-windows-official-support-thread.207126/page-486">ModMii</a>The best way to mod a wii .</div>
					<div class="links"><a target="blank" href="https://gbatemp.net/threads/mymenuifymod.301019/">MyMenuifyMod</a>A wii app to install themes .</div>
					<div class="links"><a target="blank" href="https://gbatemp.net/threads/wii-themer-a-tool-to-install-custom-themes.346675/">Wii Themer</a>A wii app to install themes .</div>
					<div class="links" onclick="updatemymenuifymoddownloads()"><a href="http://bartlesvilleok-am.com/downloads/mymenuifymod.zip" >MyMenuifyMod</a>Download the latest version of MyMenuifyMod(v2.0) .<span id="mymenuifymoddownloads"></span></div>
					<div class="links" onclick="updatewiithemerdownloads()"><a href="http://bartlesvilleok-am.com/downloads/wiithemer.zip" >Wii Themer</a>Download the latest version of Wii Themer(v2.0) .<span id="wiithemerdownloads"></span></div>
				</div>
			</div>
		</div>
		<div id="statsmodal" class="statsmodal">	
			<div class="statsmodal-content">
				<div class="modal-header glow">
					<span title="Close Window" class="close">&times;</span>
					<h2 class="smallcaps">Wii Themer Usage</h2>
				</div>
				<div class="modal-body">
					<p>Press 'Build A Theme' button to build the Theme, Using the Wii System Menu Version and Region of your choice,also view all <span id="themecounttext"></span> themes available .</p><p>Press 'Helpful Links' button for some great websites and apps .</p><p>Press 'About Wii Themer' button to see these instructions, website stats, etc...</p><p>Press 'Contact Us' button to see the owner/operator's contact information.</p>
					<p>Page Loads - <span id="pageloadcount"></span></p>
					<p>Themes Served - <span id="themedlcount"></span></p>
				</div>
			</div>
		</div>
		<div id="contactmodal" class="contactmodal">
			<div class="contactmodal-content">
				<div class="modal-header glow">
					<span title="Close Window" class="close">&times;</span>
					<h2 class="smallcaps">Contact Info</h2>
				</div>
				<div class="modal-body">
					<p>Contact Naythan with site issues and/or questions .</p>
					<p>Email :<a href="mailto:nayte1976@gmail.com"><i>Naythan Morey</i></a></p>
					<p>Email :<a href="mailto:scooby74029@yahoo.com"><i>Scooby74029 </i></a>from GbaTemp</p>
				</div>
			</div>
		</div>
		<div id="downloadtextmodal" class="downloadtextmodal hidden">	
			<div class="downloadtextmodal-content">
				<div class="modal-header glow">
					<span title="Close Window" id="close" class="close hidden ">&times;</span>
					<h2 class="smallcaps">Building Your Theme ... </h2>
				</div>
				<div class="modal-body">
					<div id="downloadtext" class=" text-center border-white border-radius border-white-shadow background-black text-white"></div>
				</div>
			</div>
		</div>
	</body>
	<script>
		$(document).ready(function(){
			loadregions();
			loadversions();
			checkpageload();
		});
		if(wiimode) {
			let modal = document.getElementById("downloadtextmodal");
			modal.style.display = "block";
			var modalclose = document.getElementsByClassName("close")[4]; 
			modalclose.onclick = function() {
				modal.style.display = "none";
				removesessionfolder();
				clearInterval(timer);
				resetglobals();
			}
			let copymessage = document.getElementById("downloadtext");
			copymessage.innerHTML +="<br>Please Wait .....<br>Setting session directory and copying needed files ..... ";
			copymessage.style.display = "block";
			setsesdir();
		}
	</script>
</html>